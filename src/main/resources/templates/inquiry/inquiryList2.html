<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>문의 내역</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
          rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: "Noto Sans KR", sans-serif;
            background: linear-gradient(135deg, #f0fdfa 0%, #ecfdf5 25%, #f0fdf4 50%, #f7fee7 75%, #fffbeb 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2d3436;
        }
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 20px;
        }
        .page-logo {
            width: 100px;
            height: auto;
            object-fit: contain;
        }
        .logout-button {
            padding: 12px 24px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            font-weight: 600;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .logout-button i {
            margin-right: 6px;
        }
        .logout-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 50px 0;
            background: linear-gradient(135deg, #00b894 0%, #55efc4 50%, #81ecec 100%);
            border-radius: 24px;
            color: white;
            box-shadow: 0 10px 30px rgba(0, 184, 148, 0.2);
        }
        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
        }
        .create-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 16px 32px;
            background: linear-gradient(45deg, #00b894, #55efc4);
            color: white;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-bottom: 30px;
            font-size: 1rem;
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            text-decoration: none;
        }
        .create-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 184, 148, 0.4);
        }
        .search-bar {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 184, 148, 0.1);
            border: 1px solid rgba(0, 184, 148, 0.15);
            margin-bottom: 30px;
        }
        .search-form {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        .search-input {
            flex: 1;
            padding: 12px 15px;
            border-radius: 12px;
            border: 2px solid rgba(0, 184, 148, 0.2);
            font-family: inherit;
            font-size: 0.95rem;
            transition: border-color 0.2s ease;
            background: white;
            color: #2d3436;
            min-width: 100px;
        }
        .search-input:focus {
            outline: none;
            border-color: #00b894;
        }
        .month-input {
            padding: 12px 15px;
            border-radius: 12px;
            border: 2px solid rgba(0, 184, 148, 0.2);
            font-family: inherit;
            font-size: 0.95rem;
            transition: border-color 0.2s ease;
            background: white;
            color: #2d3436;
            width: 160px;
        }
        .month-input:focus {
            outline: none;
            border-color: #00b894;
        }
        .status-filter {
            position: relative;
            min-width: 160px;
        }
        .status-filter-toggle {
            padding: 12px 15px;
            border-radius: 12px;
            border: 2px solid rgba(0, 184, 148, 0.2);
            background: white;
            color: #2d3436;
            font-size: 0.95rem;
            font-family: inherit;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            width: 100%;
            transition: border-color 0.2s ease;
        }
        .status-filter-toggle:hover,
        .status-filter-toggle:focus {
            border-color: #00b894;
            outline: none;
        }
        .status-filter-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 12px;
            border: 2px solid rgba(0, 184, 148, 0.2);
            box-shadow: 0 8px 16px rgba(0, 184, 148, 0.2);
            padding: 12px;
            z-index: 1000;
        }
        .status-filter-dropdown.active {
            display: block;
        }
        .status-checkboxes {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        .checkbox-item input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
            accent-color: #00b894;
        }
        .checkbox-item label {
            font-size: 0.9rem;
            color: #2d3436;
            cursor: pointer;
            user-select: none;
        }
        .search-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(45deg, #00b894, #55efc4);
            color: white;
            font-weight: 600;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .search-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.4);
        }
        .reset-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            background: linear-gradient(45deg, #b2bec3, #dfe6e9);
            color: #2d3436;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2rem;
            box-shadow: 0 2px 10px rgba(178, 190, 195, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
        }
        .reset-button:hover {
            background: linear-gradient(45deg, #95a5a6, #b2bec3);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(149, 165, 166, 0.4);
        }
        .inquiry-list {
            display: grid;
            gap: 20px;
        }
        .inquiry-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 0;
            box-shadow: 0 8px 32px rgba(0, 184, 148, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            overflow: hidden;
            border: 1px solid rgba(0, 184, 148, 0.15);
            border-top: 3px solid #00b894;
        }
        .inquiry-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 184, 148, 0.15);
        }
        .inquiry-header {
            display: flex;
            justify-content: space-between;
            align-items: center; /* 오른쪽 요소와 제목의 수직 중앙 정렬 */
            padding: 25px 30px;
            cursor: pointer;
            background: linear-gradient(90deg, rgba(0, 184, 148, 0.05), rgba(85, 239, 196, 0.05));
            border-bottom: 1px solid rgba(0, 184, 148, 0.1);
        }

        .inquiry-left {
            display: flex;
            flex-direction: column; /* 날짜와 제목을 수직으로 배치 */
            gap: 8px; /* 날짜와 제목 사이 간격 */
        }

        .inquiry-meta {
            font-size: 0.9rem;
            color: #636e72;
            line-height: 1.4; /* 높이 조정으로 제목과 오른쪽 요소 정렬 보조 */
        }

        .inquiry-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3436;
            line-height: 1.4; /* 오른쪽 요소와 높이 맞춤 */
        }

        .inquiry-right {
            display: flex;
            align-items: center; /* 이름, 상태, 답글 개수를 수평으로 정렬 */
            gap: 15px;
        }
        .inquiry-answerer {
            font-size: 0.9rem;
            color: #2d3436;
            font-weight: 500;
        }

        .inquiry-status {
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
            background: linear-gradient(45deg, #00b894, #55efc4);
            box-shadow: 0 2px 10px rgba(0, 184, 148, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .status-pending {
            background: linear-gradient(45deg, #fdcb6e, #e17055);
            box-shadow: 0 2px 10px rgba(253, 203, 110, 0.3);
        }
        .status-processing {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            box-shadow: 0 2px 10px rgba(116, 185, 255, 0.3);
        }
        .status-complete {
            background: linear-gradient(45deg, #00b894, #55efc4);
            box-shadow: 0 2px 10px rgba(0, 184, 148, 0.3);
        }
        .answer-count {
            font-size: 0.9rem;
            color: #2d3436;
            font-weight: 500;
            background: rgba(0, 184, 148, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0, 184, 148, 0.2);
        }
        .inquiry-content {
            display: none;
            padding: 30px;
            background: white;
        }
        .inquiry-content.active {
            display: block;
        }
        .content-section {
            margin-bottom: 20px;
        }
        .content-section.answer-list > .content-label {
            justify-content: flex-end;
            text-align: right;
        }
        .content-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #2d3436;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        .content-label i {
            color: #00b894;
            width: 16px;
        }
        .pending-answer {
            font-size: 0.70rem;
            color: red;
            font-weight: 450;
        }
        .content-value {
            color: #636e72;
            line-height: 1.6;
            padding-left: 24px;
        }
        .inquiry-text {
            display: inline-block;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #d1f2eb, #a7f3d0);
            border-left: 4px solid #00b894;
            border-radius: 15px 15px 15px 0;
            padding: 15px 20px;
            color: #2d3436;
            align-self: flex-start;
            max-width: 70%;
            vertical-align: top;
            box-shadow: 0 2px 10px rgba(0, 184, 148, 0.1);
        }
        .content-text.inquiry-text img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 10px 0;
        }
        .answer-text {
            max-width: 70%;
            background: linear-gradient(135deg, #00a085, #2dd4bf);
            color: white;
            padding: 15px 20px;
            border-radius: 15px 15px 0 15px;
            word-break: break-word;
            text-align: left;
            float: right;
            clear: both;
            box-shadow: 0 2px 10px rgba(0, 160, 133, 0.3);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        .answer-date {
            font-size: 0.75rem;
            color: #636e72;
            margin-top: 5px;
            display: block;
            clear: both;
            text-align: right;
        }
        .left-date {
            text-align: left;
        }
        .answer-list {
            display: block;
            gap: 8px;
        }
        .answer-list > .content-text {
            background: linear-gradient(135deg, #00a085, #2dd4bf);
            color: white;
            padding: 15px 20px;
            border-radius: 15px 15px 0 15px;
            max-width: 70%;
            word-break: break-word;
            margin-bottom: 5px;
            box-shadow: 0 2px 10px rgba(0, 160, 133, 0.3);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        .reply-form {
            margin-top: 25px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(0, 184, 148, 0.05), rgba(85, 239, 196, 0.05));
            border-radius: 15px;
            border: 1px solid rgba(0, 184, 148, 0.15);
        }
        .reply-form label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #2d3436;
            margin-bottom: 12px;
            font-size: 1rem;
        }
        .reply-form label i {
            color: #00b894;
        }
        textarea {
            width: 100%;
            padding: 0 15px;
            border-radius: 12px;
            border: 2px solid rgba(0, 184, 148, 0.2);
            resize: vertical;
            font-family: inherit;
            font-size: 0.95rem;
            transition: border-color 0.2s ease;
            background: white;
            color: #2d3436;
        }
        textarea:focus {
            outline: none;
            border-color: #00b894;
        }
        .reply-button {
            margin-top: 15px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(45deg, #00b894, #55efc4);
            color: white;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.95rem;
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .reply-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.4);
        }
        .complete-button {
            margin-top: 15px;
            margin-left: 10px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(45deg, #6c5ce7, #a29bfe);
            color: white;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.95rem;
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .complete-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(108, 92, 231, 0.4);
        }
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: #636e72;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 184, 148, 0.1);
            border: 1px solid rgba(0, 184, 148, 0.15);
        }
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #00b894;
            opacity: 0.7;
        }
        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #2d3436;
        }
        .empty-state p {
            font-size: 1rem;
            opacity: 0.8;
        }
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 30px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 184, 148, 0.1);
            border: 1px solid rgba(0, 184, 148, 0.15);
        }
        .pagination-button {
            padding: 10px 20px;
            background: linear-gradient(45deg, #00b894, #55efc4);
            color: white;
            font-weight: 600;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            text-decoration: none;
        }
        .pagination-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.4);
        }
        .pagination-button.active {
            background: linear-gradient(45deg, #0984e3, #74b9ff);
            box-shadow: 0 4px 15px rgba(9, 132, 227, 0.3);
            cursor: default;
            transform: none;
        }
        .pagination-button:hover.active {
            transform: none;
        }
        .pagination-button.disabled {
            background: #b2bec3;
            cursor: not-allowed;
            box-shadow: none;
        }
        .pagination-button.disabled:hover {
            transform: none;
            box-shadow: none;
        }
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
                padding: 15px;
            }
            .page-logo {
                width: 80px;
            }
            .logout-button {
                width: 100%;
                justify-content: center;
            }
            .header h1 {
                font-size: 2rem;
            }
            .search-form {
                flex-direction: column;
                align-items: stretch;
            }
            .search-input,
            .month-input,
            .status-filter {
                width: 100%;
                min-width: unset;
            }
            .search-button,
            .reset-button {
                width: 100%;
                justify-content: center;
            }
            .reset-button {
                padding: 10px;
                font-size: 1.1rem;
            }
            .status-filter-dropdown {
                position: static;
                box-shadow: none;
                border: none;
                padding: 10px 0;
            }
            .inquiry-header {
                flex-direction: column;
                align-items: flex-start; /* 모바일에서는 왼쪽 정렬 */
                gap: 15px;
                padding: 20px;
            }

            .inquiry-left {
                display: flex;
                flex-direction: row; /* 날짜와 제목을 수평으로 유지 */
                align-items: center;
                gap: 12px;
                width: 100%;
            }

            .inquiry-right {
                flex-direction: row; /* 이름, 상태, 답글 개수를 수평으로 유지 */
                align-items: center;
                gap: 12px;
                width: 100%;
            }
            .inquiry-content {
                padding: 20px;
            }
            .reply-form {
                padding: 20px;
            }
            .inquiry-text,
            .answer-text {
                max-width: 90%;
            }
            .complete-button {
                margin-left: 0;
                margin-top: 10px;
            }
            .pagination {
                flex-wrap: wrap;
                gap: 8px;
                padding: 10px;
            }
            .pagination-button {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
<!-- 가입 성공 및 실패 처리 -->
<script th:inline="javascript">
    /*<![CDATA[*/
    let successMessage = /*[[${successMessage}]]*/ null;
    let errorMessage = /*[[${errorMessage}]]*/ null;
    let loginErrorMessage = /*[[${loginErrorMessage}]]*/ null;

    if (successMessage !== null) {
        alert(successMessage);
    }
    if (errorMessage !== null) {
        alert(errorMessage);
    }
    if (loginErrorMessage !== null) {
        alert(loginErrorMessage);
    }

    function toggleContent(header) {
        const card = header.closest(".inquiry-card");
        const content = card.querySelector(".inquiry-content");
        const isActive = content.classList.contains("active");
        document.querySelectorAll(".inquiry-content").forEach((c) => {
            c.classList.remove("active");
        });
        if (!isActive) {
            content.classList.add("active");
        }
    }

    document.addEventListener("DOMContentLoaded", () => {
        const statusFilterToggle = document.querySelector(".status-filter-toggle");
        const statusFilterDropdown = document.querySelector(".status-filter-dropdown");

        statusFilterToggle.addEventListener("click", () => {
            statusFilterDropdown.classList.toggle("active");
        });

        // 외부 클릭 시 드롭다운 닫기
        document.addEventListener("click", (event) => {
            if (!statusFilterToggle.contains(event.target) && !statusFilterDropdown.contains(event.target)) {
                statusFilterDropdown.classList.remove("active");
            }
        });

        // 드롭다운 내부 클릭 시 이벤트 전파 방지
        statusFilterDropdown.addEventListener("click", (event) => {
            event.stopPropagation();
        });
    });
    /*]]>*/
</script>

<div class="container">
    <div class="page-header">
        <img alt="Didim Logo" class="page-logo" src="/image/didimLogo.png">
        <button class="logout-button" onclick="location.href='/logout'">
            <i class="fas fa-sign-out-alt"></i> 로그아웃
        </button>
    </div>
    <div class="header">
        <h1><i class="fas fa-headset"></i> 문의 내역</h1>
        <p>고객님의 소중한 문의사항을 확인하실 수 있습니다</p>
    </div>
    <div style="display: flex; gap: 10px;">
        <button class="create-button" onclick="location.href='/inquiryWriteForm'">
            <i class="fas fa-plus"></i> 새 문의 작성
        </button>
        <button class="create-button" onclick="location.href='/admin/console'">
            <i class="fas fa-cogs"></i> 관리자페이지
        </button>
    </div>
    <div class="search-bar">
        <form action="/searchInquiries" class="search-form" id="searchForm" method="get">
            <input name="page" type="hidden" value="0"/>
            <input class="search-input" name="title" placeholder="제목으로 검색..." th:value="${searchInquiry?.title ?: ''}"
                   type="text">
            <input class="search-input" name="writer" placeholder="작성자로 검색..." th:value="${searchInquiry?.writer ?: ''}"
                   type="text">
            <input class="month-input" name="yearMonth" placeholder="년월 선택"
                   th:value="${searchInquiry?.yearMonth ?: ''}"
                   type="month">
            <div class="status-filter">
                <div class="status-filter-toggle">
                    <span>답변 상태</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="status-filter-dropdown">
                    <div class="status-checkboxes">
                        <div class="checkbox-item">
                            <input id="status-pending" name="status"
                                   th:checked="${searchInquiry?.status != null and #strings.contains(searchInquiry.status, '답변 대기중')}"
                                   type="checkbox"
                                   value="답변 대기중">
                            <label for="status-pending">답변 대기중</label>
                        </div>
                        <div class="checkbox-item">
                            <input id="status-processing" name="status"
                                   th:checked="${searchInquiry?.status != null and #strings.contains(searchInquiry.status, '답변완료')}"
                                   type="checkbox"
                                   value="답변완료">
                            <label for="status-processing">답변완료</label>
                        </div>
                        <div class="checkbox-item">
                            <input id="status-complete" name="status"
                                   th:checked="${searchInquiry?.status != null and #strings.contains(searchInquiry.status, '처리완료')}"
                                   type="checkbox"
                                   value="처리완료">
                            <label for="status-complete">처리완료</label>
                        </div>
                    </div>
                </div>
            </div>
            <button class="search-button" type="submit">
                <i class="fas fa-search"></i> 검색
            </button>
            <button class="reset-button" onclick="resetForm()" type="button">
                <i class="fas fa-undo"></i>
            </button>
        </form>
    </div>
    <div class="inquiry-list" th:if="${not #lists.isEmpty(inquiries.content)}">
        <div class="inquiry-card" th:each="inquiry : ${inquiries.content}">
            <div class="inquiry-header" onclick="toggleContent(this)">
                <div class="inquiry-left">
                    <div class="inquiry-meta">
                        <span th:text="${#temporals.format(inquiry.createdAt, 'yyyy-MM-dd HH:mm')}">날짜</span>
                    </div>
                    <div class="inquiry-title">
                        <span th:text="${inquiry.title}">제목</span>
                    </div>
                </div>
                <div class="inquiry-right">
                    <span class="inquiry-answerer" th:if="${!#lists.isEmpty(inquiry.answers)}"
                          th:text="'답변자 : ' + ${inquiry.answers[0].user.name}" title="답변자">답변자</span>
                    <div class="inquiry-status"
                         th:classappend="${inquiry.status == '답변 대기중' ? ' status-pending' : (inquiry.status == '답변완료' ? ' status-processing' : (inquiry.status == '처리완료' ? ' status-complete' : ''))}"
                         th:text="${inquiry.status}">
                    </div>
                    <span class="answer-count" th:text="${#lists.size(inquiry.answers)}" title="답글 개수">0 답글</span>
                </div>
            </div>
            <div class="inquiry-content">
                <div class="content-section">
                    <div class="content-label">
                        <i class="fas fa-user"></i> 작성자
                    </div>
                    <div class="content-value" th:text="${inquiry.manager.name}">작성자</div>
                </div>
                <div class="content-section">
                    <div class="content-label">
                        <i class="fas fa-phone"></i> 연락처
                    </div>
                    <div class="content-value" th:text="${inquiry.manager.tel}">010-1234-5678</div>
                </div>
                <div class="content-section">
                    <div class="content-label">
                        <i class="fas fa-envelope"></i> 이메일
                    </div>
                    <div class="content-value" th:text="${inquiry.manager.email}">test@example.com</div>
                </div>
                <div class="content-section">
                    <div class="content-label">
                        <i class="fas fa-folder"></i> 프로젝트
                    </div>
                    <div class="content-value" th:text="${inquiry.project.subject}">테스트프로젝트</div>
                </div>
                <div class="content-section">
                    <div class="content-label">
                        <i class="fas fa-comment-dots"></i> 문의 내용
                        <span class="pending-answer" th:if="${#lists.isEmpty(inquiry.answers)}"> * 담당자가 문의 확인 후 답변 예정입니다.</span>
                    </div>
                    <div class="content-text inquiry-text" th:utext="${inquiry.content}">
                        문의 내용이 표시됩니다.
                    </div>
                </div>
                <div class="content-section answer-list" th:if="${!#lists.isEmpty(inquiry.answers)}">
                    <div style="margin-bottom: 15px;" th:each="answer : ${inquiry.answers}">
                        <div class="content-label"
                             th:style="${answer.user.id == inquiry.writer.id} ? 'justify-content: flex-start; text-align: left;' : 'justify-content: flex-end; text-align: right;'">
                            <i class="fas fa-reply"></i>
                            <span th:text="${answer.user.name} + ' 답글'">답글</span>
                        </div>
                        <div class="inquiry-text" th:if="${answer.user.id == inquiry.writer.id}"
                             th:utext="${answer.content}"></div>
                        <span class="answer-date left-date"
                              th:if="${answer.user.id == inquiry.writer.id}"
                              th:text="${answer.repliedAt != null ? #temporals.format(answer.repliedAt, 'yyyy-MM-dd HH:mm') : ''}"></span>
                        <div class="answer-text" th:if="${answer.user.id != inquiry.writer.id}"
                             th:utext="${answer.content}"></div>
                        <span class="answer-date"
                              th:if="${answer.user.id != inquiry.writer.id}"
                              th:text="${answer.repliedAt != null ? #temporals.format(answer.repliedAt, 'yyyy-MM-dd HH:mm') : ''}"></span>
                    </div>
                </div>
                <form action="/answerWrite" class="reply-form" method="post" onclick="event.stopPropagation();"
                      th:if="${role == 'ADMIN' or !#lists.isEmpty(inquiry.answers)}">
                    <input name="inquiry.id" th:value="${inquiry.id}" type="hidden"/>
                    <label>
                        <i class="fas fa-reply"></i> 답글 작성
                    </label>
                    <textarea name="content" placeholder="답글을 입력해주세요..." rows="4"></textarea>
                    <button class="reply-button" type="submit">
                        <i class="fas fa-paper-plane"></i> 답글 전송
                    </button>
                    <button class="complete-button"
                            th:if="${role == 'ADMIN'}"
                            th:onclick="|location.href='/inquiryComplete?id=${inquiry.id}'|"
                            type="button">
                        <i class="fas fa-check-circle"></i> 처리 완료
                    </button>
                </form>
            </div>
        </div>
        <div class="empty-state" th:if="${#lists.isEmpty(inquiries.content)}">
            <i class="fas fa-inbox"></i>
            <h3>등록된 문의가 없습니다</h3>
            <p>새로운 문의를 작성해보세요</p>
        </div>
    </div>
    <div class="pagination" th:if="${inquiries.totalPages > 1}">
        <th:block th:with="
            currentPage=${inquiries.number},
            totalPages=${inquiries.totalPages},
            pageSize=5,
            startPage=${(currentPage / pageSize) * pageSize},
            endPage=${startPage + pageSize - 1 > totalPages - 1 ? totalPages - 1 : startPage + pageSize - 1}">
            <a class="pagination-button"
               th:href="${searchInquiry != null} ? @{/searchInquiries(page=0, title=${searchInquiry.title ?: ''}, writer=${searchInquiry.writer ?: ''}, yearMonth=${searchInquiry.yearMonth ?: ''}, status=${searchInquiry.status})} : @{/inquiryList(page=0)}"
               th:if="${startPage > 0}">
                <i class="fas fa-angle-double-left"></i>
            </a>
            <a class="pagination-button"
               th:href="${searchInquiry != null} ? @{/searchInquiries(page=${startPage - 1}, title=${searchInquiry.title ?: ''}, writer=${searchInquiry.writer ?: ''}, yearMonth=${searchInquiry.yearMonth ?: ''}, status=${searchInquiry.status})} : @{/inquiryList(page=${startPage - 1})}"
               th:if="${startPage > 0}">
                <i class="fas fa-chevron-left"></i> 이전
            </a>
            <a class="pagination-button"
               th:classappend="${page == currentPage} ? 'active'"
               th:each="page : ${#numbers.sequence(startPage, endPage)}"
               th:href="${searchInquiry != null} ? @{/searchInquiries(page=${page}, title=${searchInquiry.title ?: ''}, writer=${searchInquiry.writer ?: ''}, yearMonth=${searchInquiry.yearMonth ?: ''}, status=${searchInquiry.status})} : @{/inquiryList(page=${page})}"
               th:text="${page + 1}">
            </a>
            <a class="pagination-button"
               th:href="${searchInquiry != null} ? @{/searchInquiries(page=${endPage + 1}, title=${searchInquiry.title ?: ''}, writer=${searchInquiry.writer ?: ''}, yearMonth=${searchInquiry.yearMonth ?: ''}, status=${searchInquiry.status})} : @{/inquiryList(page=${endPage + 1})}"
               th:if="${endPage < totalPages - 1}">
                다음 <i class="fas fa-chevron-right"></i>
            </a>
            <a class="pagination-button"
               th:href="${searchInquiry != null} ? @{/searchInquiries(page=${totalPages - 1}, title=${searchInquiry.title ?: ''}, writer=${searchInquiry.writer ?: ''}, yearMonth=${searchInquiry.yearMonth ?: ''}, status=${searchInquiry.status})} : @{/inquiryList(page=${totalPages - 1})}"
               th:if="${endPage < totalPages - 1}">
                <i class="fas fa-angle-double-right"></i>
            </a>
        </th:block>
    </div>
</div>
<script>
    function resetForm() {
        document.getElementById('searchForm').reset();
        window.location.href = '/searchInquiries?page=0';
    }
</script>
</body>
</html>