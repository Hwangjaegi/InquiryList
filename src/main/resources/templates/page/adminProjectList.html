<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="/image/didimIcon.png" rel="icon" type="image/png">
    <title>프로젝트 목록</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: "Noto Sans KR", sans-serif; background: linear-gradient(135deg, #f0fdfa 0%, #ecfdf5 25%, #f0fdf4 50%, #f7fee7 75%, #fffbeb 100%); min-height: 100vh; color: #333; }
        .container { display: flex; min-height: 100vh; }
        .sidebar { width: 250px; background: rgba(255,255,255,0.85); backdrop-filter: blur(10px); border-right: 1px solid rgba(168,230,207,0.3); padding: 20px; transition: all 0.3s ease; }
        .sidebar h2 { color: #4a9b8e; margin-bottom: 30px; text-align: center; font-size: 1.5rem; text-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .menu-item { display: block; padding: 15px 20px; margin-bottom: 10px; background: rgba(168,230,207,0.2); border: 1px solid rgba(168,230,207,0.3); border-radius: 10px; color: #4a9b8e; text-decoration: none; transition: all 0.3s ease; cursor: pointer; position: relative; overflow: hidden; font-weight: 500; }
        .menu-item:hover { background: rgba(168,230,207,0.4); transform: translateX(5px); color: #2d6a5d; }
        .menu-item.active { background: linear-gradient(135deg, #a8e6cf, #7fcdcd); color: white; box-shadow: 0 4px 15px rgba(168,230,207,0.3); }
        .menu-item-logout { background: linear-gradient(45deg, #ff6b6b, #ee5a52); border: 1px solid rgba(255,107,107,0.3); color: white; }
        .menu-item-logout:hover { background: linear-gradient(45deg, #ff8787, #f76c6c); transform: translateX(5px); color: white; box-shadow: 0 4px 15px rgba(255,107,107,0.4); }
        .menu-item-logout::before { background: linear-gradient(90deg, transparent, rgba(255,107,107,0.3), transparent); }
        .menu-item-logout:hover::before { left: 100%; }
        .nav-section { margin-bottom: 20px; }
        .nav-section-title { color: #4a9b8e; font-size: 1rem; font-weight: 600; margin-bottom: 10px; padding-left: 10px; }
        .main-content { flex: 1; padding: 30px; background: rgba(255,255,255,0.3); backdrop-filter: blur(5px); }
        .header { background: rgba(255,255,255,0.8); backdrop-filter: blur(10px); border-radius: 15px; padding: 20px; margin-bottom: 30px; border: 1px solid rgba(168,230,207,0.3); }
        .header h1 { color: #4a9b8e; font-size: 2rem; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .header p { color: #666; font-size: 1.1rem; }
        .content-card { background: rgba(255,255,255,0.8); backdrop-filter: blur(10px); border-radius: 15px; padding: 30px; border: 1px solid rgba(168,230,207,0.3); box-shadow: 0 8px 32px rgba(168,230,207,0.15); }
        .form-section { margin-bottom: 30px; }
        .form-section h3 { color: #4a9b8e; margin-bottom: 20px; font-size: 1.3rem; }
        .form-group { display: flex; gap: 15px; margin-bottom: 20px; align-items: center; }
        .form-group input, .form-group select { flex: 1; padding: 12px 15px; border: 1px solid rgba(168,230,207,0.5); border-radius: 8px; background: rgba(255,255,255,0.9); color: #333; font-size: 1rem; transition: all 0.3s ease; font-family: inherit; }
        .form-group input::placeholder { color: #999; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #a8e6cf; background: rgba(255,255,255,1); box-shadow: 0 0 0 3px rgba(168,230,207,0.2); }
        .btn { padding: 12px 25px; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: all 0.3s ease; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; position: relative; overflow: hidden; text-decoration: none; display: inline-block; text-align: center; }
        .btn-primary { background: linear-gradient(45deg, #a8e6cf, #7fcdcd); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(168,230,207,0.4); }
        .btn-danger { background: linear-gradient(45deg, #ff6b6b, #ee5a52); color: white; }
        .btn-danger:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(255,107,107,0.4); }
        .btn-edit { background: linear-gradient(45deg, #4fc3f7, #29b6f6); color: white; padding: 8px 16px; font-size: 0.9rem; }
        .btn-edit:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(79,195,247,0.4); }
        .btn-delete { background: linear-gradient(45deg, #ff7043, #f4511e); color: white; padding: 8px 16px; font-size: 0.9rem; }
        .btn-delete:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255,112,67,0.4); }
        .btn-secondary { background: linear-gradient(45deg, #9e9e9e, #757575); color: white; }
        .btn-secondary:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(158,158,158,0.4); }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); border-radius: 15px; padding: 20px; text-align: center; border: 1px solid rgba(168,230,207,0.3); transition: transform 0.3s ease; }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(168,230,207,0.2); }
        .stat-number { font-size: 2rem; font-weight: bold; color: #4a9b8e; margin-bottom: 10px; }
        .stat-label { color: #666; font-size: 0.9rem; }
        .project-list { margin-top: 30px; }
        .project-table { width: 100%; border-collapse: collapse; background: rgba(255,255,255,0.9); border-radius: 12px; overflow: hidden; border: 1px solid rgba(168,230,207,0.3); box-shadow: 0 8px 25px rgba(168,230,207,0.2); }
        .project-table th, .project-table td { padding: 15px; text-align: left; border-bottom: 1px solid rgba(168,230,207,0.3); font-weight: 600; color: #4a9b8e;}
        .project-table th { background: linear-gradient(135deg, #a8e6cf, #7fcdcd); color: white; font-weight: 600; font-size: 1rem; }
        .project-table tr { transition: all 0.3s ease; }
        .project-table tr:hover { background: rgba(168,230,207,0.1); transform: translateY(-2px); }
        .project-table .project-actions { display: flex; gap: 8px; justify-content: flex-end; }
        .search-container { position: relative; margin-bottom: 20px; }
        .search-input { width: 100%; padding: 15px 20px; padding-left: 50px; border: 1px solid rgba(168,230,207,0.5); border-radius: 25px; background: rgba(255,255,255,0.9); color: #333; font-size: 1rem; transition: all 0.3s ease; }
        .search-input::placeholder { color: #999; }
        .search-input:focus { outline: none; border-color: #a8e6cf; background: rgba(255,255,255,1); box-shadow: 0 0 0 3px rgba(168,230,207,0.2); }
        .search-icon { position: absolute; left: 18px; top: 50%; transform: translateY(-50%); color: #a8e6cf; font-size: 1.2rem; cursor: pointer; }
        .pagination { display: flex; justify-content: center; align-items: center; gap: 8px; margin-top: 30px; }
        .pagination-button { padding: 10px 16px; border: 1px solid rgba(168,230,207,0.5); border-radius: 8px; background: rgba(255,255,255,0.9); color: #4a9b8e; text-decoration: none; transition: all 0.3s ease; font-size: 0.9rem; font-weight: 600; min-width: 44px; text-align: center; }
        .pagination-button:hover:not(.disabled) { background: rgba(168,230,207,0.4); transform: translateY(-2px); box-shadow: 0 4px 15px rgba(168,230,207,0.2); }
        .pagination-button.active { background: linear-gradient(45deg, #a8e6cf, #7fcdcd); color: white; border: none; box-shadow: 0 4px 15px rgba(168,230,207,0.3); }
        .pagination-button.disabled { color: #999; pointer-events: none; background: rgba(255,255,255,0.5); opacity: 0.5; }
        .pagination-nav { display: flex; align-items: center; gap: 4px; font-size: 0.85rem; }
        .message-alert {
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
            animation: slideInRight 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            white-space: nowrap;
        }
        .message-success {
            background: linear-gradient(135deg, #4caf50, #388e3c);
            color: white;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }
        .message-error {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
            border: 1px solid rgba(244, 67, 54, 0.3);
        }
        .message-icon {
            font-size: 1.1rem;
        }
        /* Modal Styles */
        .modal {
            display: flex;
            visibility: hidden;
            opacity: 0;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
            z-index: 1000;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            align-items: center;
            justify-content: center;
        }
        .modal.show {
            display: flex;
            visibility: visible;
            opacity: 1;
        }
        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border: 1px solid rgba(168, 230, 207, 0.3);
            box-shadow: 0 20px 60px rgba(168, 230, 207, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(168, 230, 207, 0.3);
        }
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #4a9b8e;
        }
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #999;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        .modal-close:hover {
            background: rgba(168, 230, 207, 0.2);
            color: #4a9b8e;
        }
        .modal-body {
            margin-bottom: 25px;
        }
        .modal-footer {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            padding-top: 15px;
            border-top: 1px solid rgba(168, 230, 207, 0.3);
        }
        .form-row {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
        }
        .form-label {
            font-weight: 600;
            color: #4a9b8e;
            font-size: 0.95rem;
        }
        .form-input {
            padding: 12px 15px;
            border: 1px solid rgba(168, 230, 207, 0.5);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }
        .form-input:focus {
            outline: none;
            border-color: #a8e6cf;
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 0 3px rgba(168, 230, 207, 0.2);
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
</head>
<body>
<div class="container">
    <aside class="sidebar">
        <h2>관리자페이지</h2>
        <nav class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-section-title">관리 메뉴</div>
                <a class="menu-item" th:href="@{/myInfo}">🙍‍♂️ 내정보</a>
                <a class="menu-item" th:href="@{/console}">👥 고객 코드 관리</a>
                <a class="menu-item" th:href="@{/admin/customerList}">👤 사용자 관리</a>
                <a class="menu-item active" th:href="@{/admin/projectListAdmin}">📋 프로젝트 목록</a>
            </div>
            <div class="nav-section">
                <div class="nav-section-title">기타</div>
                <a class="menu-item" th:href="@{/inquiryList}">📋 문의리스트</a>
                <a class="menu-item menu-item-logout" th:href="@{/logout}">🚪 로그아웃</a>
            </div>
        </nav>
    </aside>
    <main class="main-content">
        <div class="header">
            <h1>프로젝트 목록</h1>
            <p>전체 프로젝트를 확인하고 관리할 수 있습니다.</p>
        </div>
        <div class="content-card">
            <div class="form-section">
                <h3>프로젝트 추가</h3>
                <form id="addProjectForm" method="post" th:action="@{/admin/projectAdd}">
                    <div class="form-group" style="align-items: center;">
                        <label class="form-label" for="projectSubject">프로젝트명</label>
                        <input class="form-input" id="projectSubject" name="projectSubject" placeholder="프로젝트 제목" required type="text">
                        <label class="form-label" for="customerCode">고객코드</label>
                        <select class="form-input" id="customerCode" name="customerId" required>
                            <option disabled selected value="">고객코드를 선택하세요</option>
                            <option th:each="customer : ${customerList}" th:text="${customer.code}" th:value="${customer.id}"></option>
                        </select>
                        <button class="btn btn-primary" style="margin-left: 10px;" type="submit">추가</button>
                    </div>
                    <div class="message-alert message-success" th:if="${successMessage}">
                        <span class="message-icon">✅</span>
                        <span th:text="${successMessage}"></span>
                    </div>
                    <div class="message-alert message-error" th:if="${errorMessage}">
                        <span class="message-icon">❌</span>
                        <span th:text="${errorMessage}"></span>
                    </div>
                </form>
            </div>
            <div class="project-list">
                <table class="project-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>프로젝트명</th>
                            <th>고객코드</th>
                            <th>등록일</th>
                            <th>관리</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="project : ${projectList}">
                            <td th:text="${project.id}">1</td>
                            <td th:text="${project.subject}">프로젝트 제목</td>
                            <td th:text="${project.customer != null ? project.customer.code : ''}">CUST001</td>
                            <td th:text="${#temporals.format(project.createdAt, 'yyyy-MM-dd HH:mm')}">2024-07-01 12:00</td>
                            <td class="project-actions">
                                <button class="btn btn-edit" th:attr="data-id=${project.id}" type="button">수정</button>
                                <button class="btn btn-delete" th:attr="data-id=${project.id}" type="button">삭제</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <!-- 페이징 -->
                <div class="pagination" th:if="${totalPages > 1}">
                    <th:block th:with="
                        pageGroupSize=5,
                        currentGroupIndex=${currentPage / pageGroupSize},
                        startPage=${currentGroupIndex * pageGroupSize},
                        endPage=${(startPage + pageGroupSize - 1) < (totalPages - 1) ? (startPage + pageGroupSize - 1) : (totalPages - 1)},
                        hasPrevGroup=${currentGroupIndex > 0},
                        hasNextGroup=${endPage < (totalPages - 1)},
                        prevGroupStartPage=${(currentGroupIndex - 1) * pageGroupSize},
                        nextGroupStartPage=${(currentGroupIndex + 1) * pageGroupSize}">
                        <a class="pagination-button"
                           th:classappend="${currentPage == 0} ? 'disabled'"
                           th:href="@{/admin/projectListAdmin(page=0, size=${pageSize}, search=${searchKeyword})}">
                            <span class="pagination-nav"><<</span>
                        </a>
                        <a class="pagination-button"
                           th:classappend="${!hasPrevGroup} ? 'disabled'"
                           th:href="@{/admin/projectListAdmin(page=${prevGroupStartPage}, size=${pageSize}, search=${searchKeyword})}">
                            <span class="pagination-nav">이전</span>
                        </a>
                        <a class="pagination-button"
                           th:classappend="${page == currentPage} ? 'active'"
                           th:each="page : ${#numbers.sequence(startPage, endPage)}"
                           th:href="@{/admin/projectListAdmin(page=${page}, size=${pageSize}, search=${searchKeyword})}"
                           th:text="${page + 1}">1</a>
                        <a class="pagination-button"
                           th:classappend="${!hasNextGroup} ? 'disabled'"
                           th:href="@{/admin/projectListAdmin(page=${nextGroupStartPage}, size=${pageSize}, search=${searchKeyword})}">
                            <span class="pagination-nav">다음</span>
                        </a>
                        <a class="pagination-button"
                           th:classappend="${currentPage == (totalPages - 1)} ? 'disabled'"
                           th:href="@{/admin/projectListAdmin(page=${totalPages - 1}, size=${pageSize}, search=${searchKeyword})}">
                            <span class="pagination-nav">>></span>
                        </a>
                    </th:block>
                </div>
            </div>
        </div>
    </main>
</div>
<!-- 프로젝트 수정 모달  -->
<div class="modal" id="editProjectModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">프로젝트 수정</h3>
            <button class="modal-close" onclick="closeEditProjectModal()">×</button>
        </div>
        <form id="editProjectForm" method="post" th:action="@{/admin/updateProject}">
            <div class="modal-body">
                <div class="form-row">
                    <input id="editProjectId" name="projectId" type="hidden">
                    <label class="form-label">프로젝트명</label>
                    <input class="form-input" id="editProjectSubject" name="projectSubject" required type="text">
                </div>
                <div class="form-row">
                    <label class="form-label">고객코드</label>
                    <select class="form-input" id="editCustomerCode" name="customerId" required>
                        <option disabled value="">고객코드를 선택하세요</option>
                        <option th:each="customer : ${customerList}" th:text="${customer.code}" th:value="${customer.id}"></option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeEditProjectModal()" type="button">취소</button>
                <button class="btn btn-primary" type="submit">저장</button>
            </div>
        </form>
    </div>
</div>
<!-- 프로젝트 삭제 확인 모달 -->
<div class="modal" id="deleteProjectModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">프로젝트 삭제</h3>
            <button class="modal-close" onclick="closeDeleteProjectModal()">×</button>
        </div>
        <div class="modal-body">
            <p>정말로 <strong id="deleteProjectName"></strong> (고객코드: <span id="deleteProjectCustomerCode"></span>) 프로젝트를 삭제하시겠습니까?</p>
            <p style="color: #f44336; font-size: 0.9rem; margin-top: 10px;">이 작업은 되돌릴 수 없습니다.</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeDeleteProjectModal()" type="button">취소</button>
            <button class="btn btn-danger" onclick="confirmDeleteProject()" type="button">삭제</button>
        </div>
    </div>
</div>
<script>
    // 메시지 알림 자동 사라짐 (message-alert만 사라지게)
    setTimeout(() => {
        document.querySelectorAll('.message-alert').forEach(alert => {
            alert.style.opacity = '0';
            alert.style.transform = 'translateX(20px)';
            setTimeout(() => {
                alert.remove();
            }, 300);
        });
    }, 4000);

    // 쿼리스트링 파싱 유틸
    function getQueryParam(name) {
        const url = new URL(window.location.href);
        return url.searchParams.get(name) || '';
    }
    const currentPage = getQueryParam('page') || '0';
    const currentSearch = getQueryParam('search') || '';
    const currentSize = getQueryParam('size') || '10';

    // 프로젝트 수정 모달 핸들러
    let currentEditProjectId = null;
    document.addEventListener('click', function(e) {
        if (e.target && e.target.classList.contains('btn-edit')) {
            const tr = e.target.closest('tr');
            const id = e.target.getAttribute('data-id');
            const subject = tr.querySelector('td:nth-child(2)').textContent.trim();
            const customerCode = tr.querySelector('td:nth-child(3)').textContent.trim();
            openEditProjectModal(id, subject, customerCode);
        }
    });
    function openEditProjectModal(id, subject, customerCode) {
        currentEditProjectId = id;
        document.getElementById('editProjectId').value = id;
        document.getElementById('editProjectSubject').value = subject;
        // 고객코드 select에서 해당 값 선택
        const select = document.getElementById('editCustomerCode');
        for (let i = 0; i < select.options.length; i++) {
            if (select.options[i].text === customerCode) {
                select.selectedIndex = i;
                break;
            }
        }
        // 페이지/검색/사이즈 hidden input 추가
        setEditProjectHiddenInputs();
        document.getElementById('editProjectModal').classList.add('show');
    }
    function setEditProjectHiddenInputs() {
        let form = document.getElementById('editProjectForm');
        ['editPage','editSearch','editSize'].forEach(id => {
            let el = document.getElementById(id);
            if (el) el.remove();
        });
        let page = document.createElement('input');
        page.type = 'hidden'; page.name = 'page'; page.id = 'editPage'; page.value = currentPage;
        let search = document.createElement('input');
        search.type = 'hidden'; search.name = 'search'; search.id = 'editSearch'; search.value = currentSearch;
        let size = document.createElement('input');
        size.type = 'hidden'; size.name = 'size'; size.id = 'editSize'; size.value = currentSize;
        form.appendChild(page); form.appendChild(search); form.appendChild(size);
    }
    function closeEditProjectModal() {
        document.getElementById('editProjectModal').classList.remove('show');
        currentEditProjectId = null;
    }

    // 삭제 버튼 이벤트 위임
    let currentDeleteProjectId = null;
    document.addEventListener('click', function(e) {
        if (e.target && e.target.classList.contains('btn-delete')) {
            const tr = e.target.closest('tr');
            const id = e.target.getAttribute('data-id');
            const subject = tr.querySelector('td:nth-child(2)').textContent.trim();
            const customerCode = tr.querySelector('td:nth-child(3)').textContent.trim();
            openDeleteProjectModal(id, subject, customerCode);
        }
    });
    function openDeleteProjectModal(id, subject, customerCode) {
        currentDeleteProjectId = id;
        document.getElementById('deleteProjectName').textContent = subject;
        document.getElementById('deleteProjectCustomerCode').textContent = customerCode;
        setDeleteProjectHiddenInputs();
        document.getElementById('deleteProjectModal').classList.add('show');
    }
    function setDeleteProjectHiddenInputs() {
        let modal = document.getElementById('deleteProjectModal');
        ['deletePage','deleteSearch','deleteSize'].forEach(id => {
            let el = document.getElementById(id);
            if (el) el.remove();
        });
        let page = document.createElement('input');
        page.type = 'hidden'; page.name = 'page'; page.id = 'deletePage'; page.value = currentPage;
        let search = document.createElement('input');
        search.type = 'hidden'; search.name = 'search'; search.id = 'deleteSearch'; search.value = currentSearch;
        let size = document.createElement('input');
        size.type = 'hidden'; size.name = 'size'; size.id = 'deleteSize'; size.value = currentSize;
        // 삭제 폼은 JS로 생성하므로, confirmDeleteProject에서 사용
        window._deleteProjectHiddenInputs = [page, search, size];
    }
    function closeDeleteProjectModal() {
        document.getElementById('deleteProjectModal').classList.remove('show');
        currentDeleteProjectId = null;
    }
    function confirmDeleteProject() {
        if (!currentDeleteProjectId) return;
        // 폼 생성 후 POST 전송
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = `/admin/deleteProject/${currentDeleteProjectId}`;
        (window._deleteProjectHiddenInputs||[]).forEach(input => form.appendChild(input));
        document.body.appendChild(form);
        form.submit();
    }
</script>
</body>
</html> 